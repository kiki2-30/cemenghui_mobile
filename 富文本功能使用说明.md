# 行业动态富文本功能使用说明

## 功能概述

本项目已成功集成了富文本编辑和展示功能，支持HTML标签的编辑和渲染。

## 新增组件

### 1. RichTextView - 富文本展示组件
- **位置**: `entry/src/main/ets/components/RichTextView.ets`
- **功能**: 用于展示富文本内容
- **支持**: HTML标签渲染、样式定制

### 2. SimpleRichTextEditor - 简化富文本编辑器组件
- **位置**: `entry/src/main/ets/components/SimpleRichTextEditor.ets`
- **功能**: 用于编辑富文本内容
- **支持**: 工具栏、实时编辑、HTML标签插入

## 使用方法

### 在页面中使用富文本展示

```typescript
import { RichTextView } from '../components/RichTextView'

// 在build()方法中使用
RichTextView({ 
  content: this.news?.content ?? '',
  style: {
    fontSize: 14,
    fontColor: '#666666',
    lineHeight: 1.5,
    padding: 0
  }
})
.width('100%')
.height('auto')
```

### 在页面中使用富文本编辑

```typescript
import { SimpleRichTextEditor } from '../components/SimpleRichTextEditor'

// 在build()方法中使用
SimpleRichTextEditor({ 
  content: this.content,
  onContentChange: (content: string) => {
    this.content = content
  }
})
```

## 支持的HTML标签

### 文本格式
- `<b>` 或 `<strong>` - 粗体
- `<i>` 或 `<em>` - 斜体
- `<u>` - 下划线
- `<h1>` 到 `<h6>` - 标题
- `<p>` - 段落

### 列表
- `<ul>` - 无序列表
- `<ol>` - 有序列表
- `<li>` - 列表项

### 引用和代码
- `<blockquote>` - 引用块
- `<code>` - 行内代码
- `<pre>` - 代码块

### 链接和图片
- `<a href="...">` - 链接
- `<img src="..." alt="...">` - 图片

### 表格
- `<table>` - 表格
- `<tr>` - 表格行
- `<th>` - 表头
- `<td>` - 表格单元格

### 样式类
- `.text-center` - 居中对齐
- `.text-right` - 右对齐
- `.text-left` - 左对齐
- `.highlight` - 高亮显示

## 编辑器工具栏功能

富文本编辑器提供以下工具栏按钮：

1. **B** - 粗体
2. **I** - 斜体
3. **U** - 下划线
4. **↵** - 换行
5. **H** - 插入标题
6. **•** - 插入列表
7. **"** - 插入引用
8. **{}** - 插入代码
9. **🔗** - 插入链接
10. **🖼️** - 插入图片

## 样式定制

所有富文本组件都支持样式定制：

```typescript
interface RichTextStyle {
  fontSize?: number      // 字体大小
  fontColor?: string     // 字体颜色
  lineHeight?: number    // 行高
  padding?: number       // 内边距
  height?: number        // 高度（仅编辑器）
}
```

## 权限配置

已在 `module.json5` 中添加了WebView权限：

```json
{
  "name": "ohos.permission.WEBVIEW",
  "reason": "用于富文本编辑和显示"
}
```

## 注意事项

1. **性能考虑**: WebView组件会消耗一定内存，建议在不需要时及时销毁
2. **内容安全**: 富文本内容可能包含HTML标签，注意XSS攻击防护
3. **兼容性**: 确保后端API支持HTML内容的存储和返回
4. **样式一致性**: 富文本样式应与应用整体设计保持一致

## 示例内容

以下是一些富文本内容的示例：

### 基础文本
```html
<p>这是一段普通文本。</p>
<p><strong>这是粗体文本。</strong></p>
<p><em>这是斜体文本。</em></p>
```

### 标题和段落
```html
<h3>这是一个标题</h3>
<p>这是标题下的段落内容。</p>
```

### 列表
```html
<ul>
  <li>列表项1</li>
  <li>列表项2</li>
  <li>列表项3</li>
</ul>
```

### 引用
```html
<blockquote>这是一个引用块，用于突出显示重要信息。</blockquote>
```

### 代码
```html
<p>这是行内代码：<code>console.log('Hello World')</code></p>
<pre>这是代码块：
function hello() {
  console.log('Hello World');
}</pre>
```

### 链接和图片
```html
<p>这是一个<a href="https://example.com">链接</a>。</p>
<img src="https://example.com/image.jpg" alt="示例图片">
```

## 更新日志

- ✅ 添加富文本展示组件
- ✅ 添加简化富文本编辑器组件
- ✅ 更新NewsDetailPage使用富文本展示
- ✅ 更新NewsEditPage使用富文本编辑
- ✅ 添加WebView权限配置
- ✅ 支持常用HTML标签
- ✅ 提供工具栏功能
- ✅ 支持样式定制
- ✅ 修复ArkTS编译错误 